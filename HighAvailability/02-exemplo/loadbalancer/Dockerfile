FROM jasonwyatt/nginx-loadbalancer

MAINTAINER Anselmo Pfeifer: 0.1

ENV DEBIAN_FRONTEND noninteractive

ENV TOMCAT_1_PORT_8080_TCP_ADDR=host1
ENV TOMCAT_2_PORT_8080_TCP_ADDR=host2
ENV TOMCAT_3_PORT_8080_TCP_ADDR=host3

ENV WEBAPP_PATH=/
ENV WEBAPP_BALANCING_TYPE=ip_hash
ENV WEBAPP_EXPOSE_PROTOCOL=both
ENV WEBAPP_HOSTNAME=dev.anselmopfeifer.com
ENV WEBAPP_ACCESS_LOG=on
ENV WEBAPP_ERROR_LOG=/var/log/nginx
ENV WEBAPP_LOG_LEVEL=emerg

ENV API_EXPOSE_PROTOCOL=https
ENV API_HOSTNAME=dev.anselmopfeifer.com
ENV WWW_EXAMPLE_COM_SSL_CERTIFICATE=ssl/something.pem
ENV WWW_EXAMPLE_COM_SSL_CERTIFICATE_KEY=ssl/something.key
ENV WWW_EXAMPLE_COM_SSL_DHPARAM=ssl/dhparam.pem
ENV WWW_EXAMPLE_COM_SSL_CIPHERS="ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256"
ENV WWW_EXAMPLE_COM_SSL_PROTOCOLS=TLSv1.2
ENV TOMCAT_PATH=/
ENV TOMCAT_REMOTE_PORT=8080
ENV TOMCAT_REMOTE_PATH=/

EXPOSE 80
EXPOSE 443
